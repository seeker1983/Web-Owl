<!DOCTYPE html>
<html>
<head>
    <script src="./target/scala-2.11/classes/js/createjs-2013.12.12.min.js"></script>
    <script src="./target/scala-2.11/classes/js/movieclip-0.7.1.min.js"></script>

    <title>Owl javascript  test page</title>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
</head>
<script type="text/javascript">
        function ns(){

          	var stage;
            var queue;
            function init()
            {
                //Create stage object - our root level container
                stage = new createjs.Stage("TestCanvas");

                //Create a load queue to handle preloading assets
                queue = new createjs.LoadQueue();
                queue.installPlugin(createjs.Sound);
                queue.on("complete", handleComplete);
                queue.loadFile({id:"pop", src:"./target/scala-2.11/classes/sound/pop.mp3"})
                queue.loadManifest([
    //            	{id:"daisy", src:"./target/scala-2.11/classes/img/world.png"},
                    {id:"world", src:"./target/scala-2.11/classes/img/world.png"}
                	]);
            }
            function onComplete()
            {
                console.log("complete")
                createjs.Sound.play("pop");
                handleComplete()
            }
            function handleComplete()
            {
                //Create interactive object, using EaselJS Drawing API
                var ball = new createjs.Shape();
                ball.addEventListener("click", handleClick);
                ball.graphics.beginFill("#000000").drawCircle(0, 0, 50);
                ball.x = 50;
                ball.y = 200;

                //Creates animation of display object
                createjs.Tween.get(ball, {loop:true}).to({x:450}, 3000).to({x:50}, 3000);

                //Listening for a tick event that will update the stage
                createjs.Ticker.addEventListener("tick", tick);

                stage.addChild(ball);
                console.log("HC")
            }

            //Handle mouse interaction
            function handleClick(event) {
                //Create a bitmap (daisy) and display a random position on stage
                var bmp = new createjs.Bitmap(queue.getResult("world"));
                bmp.x = Math.random()*500;
                bmp.y = Math.random()*500;

                stage.addChild(bmp);

                createjs.Sound.play("pop");
            }

            //Need when having animation.
            function tick(event) {
                stage.update();
            }
        }

 </script>

<body onload="(new ns()).init()">

<canvas id="TestCanvas"></canvas>

</body>
</html>

